clear;
clc;

syms th w a tau; 
syms m g l tau 'real';
q =  [ th w ];
dq = [ w  a ];

T = (1/2)*m*(l^2)*(w^2);  % kinetic energy of the pendulum
U = m*g*l*(1-cos(th));  % potential energy of the pendulum
mu = w*.5;
L = T - U;  % lagrangian

%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%                  evaluate partial derivatives                           %
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
dL_dth = jacobian(L,th);
dL_dw = jacobian(L,w);
% Note the application of the chain rule:
ddL_dtdw = jacobian(dL_dw,q) * dq.';

%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%                  solve equations                                        %
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%

% Equations of motion:
% eqn = ddL_dtdw - dL_dth + mu - tau;
eqn = ddL_dtdw - dL_dth

